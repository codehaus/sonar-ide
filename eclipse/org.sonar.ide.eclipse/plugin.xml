<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<!-- ====================================================================== -->
<!-- Copyright (C) 2010 Evgeny Mandrikov, Jérémie Lagarde                   -->
<!--                                                                        -->
<!-- Sonar-IDE is free software; you can redistribute it and/or             -->
<!-- modify it under the terms of the GNU Lesser General Public             -->
<!-- License as published by the Free Software Foundation; either           -->
<!-- version 3 of the License, or (at your option) any later version.       -->
<!--                                                                        -->
<!-- Sonar-IDE is distributed in the hope that it will be useful,           -->
<!-- but WITHOUT ANY WARRANTY; without even the implied warranty of         -->
<!-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU      -->
<!-- Lesser General Public License for more details.                        -->
<!--                                                                        -->
<!-- You should have received a copy of the GNU Lesser General Public       -->
<!-- License along with Sonar-IDE; if not, write to the Free Software       -->
<!-- Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02      -->
<!-- ====================================================================== -->
<plugin>
   <extension-point id="resolver" name="sonar resolver" schema="schema/org.sonar.ide.eclipse.markers.resolver.exsd"/>

  <extension point="org.eclipse.ui.preferencePages">
    <page
        class="org.sonar.ide.eclipse.preferences.SonarPreferencePage"
        id="org.sonar.ide.eclipse.preferences.SonarPreferencePage"
        name="%sonar.preference.page.name">
    </page>
    <page
          category="org.sonar.ide.eclipse.preferences.SonarPreferencePage"
          class="org.sonar.ide.eclipse.preferences.SonarConsolePreferencePage"
          id="org.sonar.ide.eclipse.preferences.SonarConsolePreferencePage"
          name="Console">
    </page>
  </extension>
  <extension point="org.eclipse.core.runtime.preferences">
    <initializer
        class="org.sonar.ide.eclipse.preferences.PreferenceInitializer">
    </initializer>
  </extension>
  <extension point="org.eclipse.ui.views">
    <category
        name="%sonar.category.view.name"
        id="org.sonar.ide.eclipse">
    </category>
    <view
        category="org.sonar.ide.eclipse"
        class="org.sonar.ide.eclipse.views.NavigatorView"
        icon="icons/sonar.png"
        id="org.sonar.ide.eclipse.views.NavigatorView"
        name="%sonar.navigator.view.name">
    </view>
    <view
    	category="org.sonar.ide.eclipse"
    	class="org.sonar.ide.eclipse.views.MeasuresView"
    	icon="icons/sonar.png"
    	id="org.sonar.ide.eclipse.views.MeasuresView"
    	name="%sonar.measures.view.name">
    </view>
    <view
        category="org.sonar.ide.eclipse"
        class="org.sonar.ide.eclipse.views.ViolationsView"
        icon="icons/violations_view.gif"
        id="org.sonar.ide.eclipse.views.ViolationsView"
        name="%sonar.violation.view.name">
    </view>
    <view
          category="org.sonar.ide.eclipse"
          class="org.sonar.ide.eclipse.views.RemoteView"
          icon="icons/sonar.png"
          id="org.sonar.ide.eclipse.views.RemoteView"
          name="Web">
    </view>
  </extension>

  <extension 
      point="org.eclipse.ui.ide.markerSupport"> 
    <markerContentGenerator 
         id="org.sonar.ide.eclipse.markers.violationMarkerGenerator" 
         name="Sonar Violation Marker Generator"> 
        <markerTypeReference
             id="org.sonar.ide.eclipse.sonarViolationMarker"/>
        <markerFieldReference
             id="org.sonar.ide.eclipse.views.violationRuleKeyField"
             visible="false"/>  
        <markerFieldReference
             id="org.sonar.ide.eclipse.views.violationRuleNameField"/>  
        <markerFieldReference
             id="org.sonar.ide.eclipse.views.violationRulePriorityField"/>        
        <markerFieldReference
             id="org.eclipse.ui.ide.resourceField"/>
        <markerFieldReference
             id="org.eclipse.ui.ide.locationField"/>
        <markerFieldReference
             id="org.eclipse.ui.ide.priorityField"/>        
        <markerFieldReference
             id="org.eclipse.ui.ide.severityAndDescriptionField"/>
    </markerContentGenerator>
    <markerField 
        class="org.sonar.ide.eclipse.views.ViolationRuleNameField" 
        id="org.sonar.ide.eclipse.views.violationRuleNameField" 
        name="%sonar.violation.view.rulenamefield"> 
    </markerField> 
    <markerField 
        class="org.sonar.ide.eclipse.views.ViolationRuleKeyField" 
        id="org.sonar.ide.eclipse.views.violationRuleKeyField" 
        name="%sonar.violation.view.rulekeyfield"> 
    </markerField> 
    <markerField 
        class="org.sonar.ide.eclipse.views.ViolationRulePriorityField" 
        id="org.sonar.ide.eclipse.views.violationRulePriorityField" 
        name="%sonar.violation.view.rulepriorityfield"> 
    </markerField> 
  </extension>
  
  <extension point="org.eclipse.ui.newWizards">
    <category id="org.sonar.ide.eclipse.wizcat" name="%sonar.category.wizard.name"/>
    <wizard
        canFinishEarly="true"
        category="org.sonar.ide.eclipse.wizcat"
        class="org.sonar.ide.eclipse.wizards.NewServerLocationWizard"
        descriptionImage="icons/sonar-large.gif"
        icon="icons/sonar.png"
        id="org.sonar.ide.eclipse.wizards.newserverlocationwizard"
        name="%sonar.wizard.newserverlocation.name ">
    </wizard>
  </extension>
  <extension
      point="org.eclipse.ui.propertyPages">
    <page
      objectClass="org.eclipse.core.resources.IProject"
       adaptable="true"
      class="org.sonar.ide.eclipse.properties.SonarProjectPropertyPage"
       id="org.sonar.ide.eclipse.properties.sonarProjectPropertyPage"
       name="%sonar.properties.page.name">
    </page>
  </extension>

  <extension point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.core.runtime.IAdaptable"
            class="org.sonar.ide.eclipse.actions.SonarAdapterFactory">
         <adapter type="org.eclipse.ui.IActionFilter"/>
      </factory>
  </extension>

  <extension
        point="org.eclipse.ui.popupMenus">
     <objectContribution
           id="org.sonar.ide.eclipse.contribution1"
           objectClass="org.eclipse.core.resources.IResource"
           adaptable="true">
        <menu
              icon="icons/sonar.png"
              id="org.sonar.ide.eclipse.sonar"
              label="%sonar.menu.label"
              path="additions">
           <separator
                 name="group1">
           </separator>
        </menu>
        <action
              class="org.sonar.ide.eclipse.actions.AutoConfigureProjectAction"
              enablesFor="+"
              id="org.sonar.ide.eclipse.autoConfigureProjectAction"
              label="%sonar.action.autoconfiguration.label"
              menubarPath="org.sonar.ide.eclipse.sonar/group1"
              state="true"
              style="push">
        </action>
        <action
              class="org.sonar.ide.eclipse.actions.RefreshViolationAction"
              enablesFor="+"
              id="org.sonar.ide.eclipse.refreshViolationAction"
              label="%sonar.action.refreshviolations.label"
              menubarPath="org.sonar.ide.eclipse.sonar/group1"
              state="true"
              style="push"
              icon="icons/refresh.gif">
        </action>
        <action
              class="org.sonar.ide.eclipse.actions.RefreshDuplicationAction"
              enablesFor="+"
              id="org.sonar.ide.eclipse.refreshDuplicationAction"
              label="%sonar.action.refreshduplications.label"
              menubarPath="org.sonar.ide.eclipse.sonar/group1"
              state="true"
              style="push"
              icon="icons/refresh.gif">
        </action>
        <action
              class="org.sonar.ide.eclipse.actions.OpenInBrowserAction"
              enablesFor="+"
              id="org.sonar.ide.eclipse.openInBrowserAction"
              label="%sonar.action.openinbrowser.label"
              menubarPath="org.sonar.ide.eclipse.sonar/group1"
              state="true"
              style="push"
              icon="icons/web.gif">
        </action>        
        
        <action
              label="Sonar server"
              class="org.sonar.ide.eclipse.compare.CompareWithSonarAction"
              menubarPath="compareWithMenu/compareWithGroup"
              id="org.sonar.ide.eclipse.compareWithSonar"
              icon="icons/sonar.png">
        </action>
     </objectContribution>
  </extension>
  <extension
        id="sonarViolationMarker"
        name="sonar violation"
        point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.problemmarker">
      </super>
      <persistent	
            value="true">
      </persistent>
      <attribute
            name="rulename">
      </attribute>
      <attribute
            name="rulekey">
      </attribute>
   </extension>

   <extension
        point="org.eclipse.ui.editors.annotationTypes">
        <type
            name="org.sonar.ide.eclipse.violationAnnotationType"
            markerType="org.sonar.ide.eclipse.sonarViolationMarker"/>
    </extension>

    <extension
        point="org.eclipse.ui.editors.markerAnnotationSpecification">
        <specification
            annotationType="org.sonar.ide.eclipse.violationAnnotationType"
            annotationImageProvider="org.sonar.ide.eclipse.markers.SonarMarkerImageProvider"
            presentationLayer="5"
            label="%sonar.marker.specification.label"
            verticalRulerPreferenceKey="org.sonar.ide.eclipse.violation.verticalruler"
            verticalRulerPreferenceValue="true"
            overviewRulerPreferenceKey="org.sonar.ide.eclipse.violation.overviewruler"
            overviewRulerPreferenceValue="true"
            showInNextPrevDropdownToolbarActionKey="org.sonar.ide.eclipse.violation.dropdown"
            showInNextPrevDropdownToolbarAction="true"
            isGoToPreviousNavigationTargetKey="org.sonar.ide.eclipse.violation.previous"
            isGoToPreviousNavigationTarget="true"
            isGoToNextNavigationTargetKey="org.sonar.ide.eclipse.violation.next"
            isGoToNextNavigationTarget="true"
            highlightPreferenceKey="org.sonar.ide.eclipse.violation.highlight"
            highlightPreferenceValue="true"
            textPreferenceKey="org.sonar.ide.eclipse.violation.error.text"
            textPreferenceValue="true"
            textStylePreferenceKey="org.sonar.ide.eclipse.violation.text.style"
            textStylePreferenceValue="BOX"
            colorPreferenceKey="org.sonar.ide.eclipse.violation.color"
            colorPreferenceValue="255,246,191"/>
    </extension>
  
    
    <extension
        point="org.eclipse.ui.editors.markerAnnotationSpecification">
      <specification
            annotationType="org.sonar.ide.eclipse.fullCoverageAnnotationType"
            presentationLayer="0"
            label="sonar coverage (full)"
            verticalRulerPreferenceKey="org.sonar.ide.eclipse.fullCoverage.verticalruler"
            verticalRulerPreferenceValue="false"
            overviewRulerPreferenceKey="org.sonar.ide.eclipse.fullCoverage.overviewruler"
            overviewRulerPreferenceValue="false"
            showInNextPrevDropdownToolbarActionKey="org.sonar.ide.eclipse.fullCoverage.dropdown"
            showInNextPrevDropdownToolbarAction="false"
            isGoToPreviousNavigationTargetKey="org.sonar.ide.eclipse.fullCoverage.previous"
            isGoToPreviousNavigationTarget="false"
            isGoToNextNavigationTargetKey="org.sonar.ide.eclipse.fullCoverage.next"
            isGoToNextNavigationTarget="false"
            highlightPreferenceKey="org.sonar.ide.eclipse.fullCoverage.highlight"
            highlightPreferenceValue="false"
            textPreferenceKey="org.sonar.ide.eclipse.fullCoverage.text"
            textPreferenceValue="true"
            textStylePreferenceKey="org.sonar.ide.eclipse.fullCoverage.text.style"
            textStylePreferenceValue="BOX"
            colorPreferenceKey="org.sonar.ide.eclipse.fullCoverage.color"
            colorPreferenceValue="172,233,124"/>
      <specification
            annotationType="org.sonar.ide.eclipse.partialCoverageAnnotationType"
            presentationLayer="0"
            label="sonar coverage (partial)"
            verticalRulerPreferenceKey="org.sonar.ide.eclipse.partialCoverage.verticalruler"
            verticalRulerPreferenceValue="false"
            overviewRulerPreferenceKey="org.sonar.ide.eclipse.partialCoverage.overviewruler"
            overviewRulerPreferenceValue="false"
            showInNextPrevDropdownToolbarActionKey="org.sonar.ide.eclipse.partialCoverage.dropdown"
            showInNextPrevDropdownToolbarAction="false"
            isGoToPreviousNavigationTargetKey="org.sonar.ide.eclipse.partialCoverage.previous"
            isGoToPreviousNavigationTarget="false"
            isGoToNextNavigationTargetKey="org.sonar.ide.eclipse.partialCoverage.next"
            isGoToNextNavigationTarget="false"
            highlightPreferenceKey="org.sonar.ide.eclipse.partialCoverage.highlight"
            highlightPreferenceValue="true"
            textPreferenceKey="org.sonar.ide.eclipse.partialCoverage.text"
            textPreferenceValue="true"
            textStylePreferenceKey="org.sonar.ide.eclipse.partialCoverage.text.style"
            textStylePreferenceValue="BOX"
            colorPreferenceKey="org.sonar.ide.eclipse.partialCoverage.color"
            colorPreferenceValue="255,246,191"/>
      <specification
            annotationType="org.sonar.ide.eclipse.noCoverageAnnotationType"
            presentationLayer="0"
            label="sonar coverage (no)"
            verticalRulerPreferenceKey="org.sonar.ide.eclipse.noCoverage.verticalruler"
            verticalRulerPreferenceValue="false"
            overviewRulerPreferenceKey="org.sonar.ide.eclipse.noCoverage.overviewruler"
            overviewRulerPreferenceValue="false"
            showInNextPrevDropdownToolbarActionKey="org.sonar.ide.eclipse.noCoverage.dropdown"
            showInNextPrevDropdownToolbarAction="false"
            isGoToPreviousNavigationTargetKey="org.sonar.ide.eclipse.noCoverage.previous"
            isGoToPreviousNavigationTarget="false"
            isGoToNextNavigationTargetKey="org.sonar.ide.eclipse.noCoverage.next"
            isGoToNextNavigationTarget="false"
            highlightPreferenceKey="org.sonar.ide.eclipse.noCoverage.highlight"
            highlightPreferenceValue="true"
            textPreferenceKey="org.sonar.ide.eclipse.noCoverage.text"
            textPreferenceValue="true"
            textStylePreferenceKey="org.sonar.ide.eclipse.noCoverage.text.style"
            textStylePreferenceValue="BOX"
            colorPreferenceKey="org.sonar.ide.eclipse.noCoverage.color"
            colorPreferenceValue="240,200,200"/>
   </extension>

  <extension
        id="sonarDuplicationMarker"
        name="sonar duplication"
        point="org.eclipse.core.resources.markers">
      <super
            type="org.eclipse.core.resources.problemmarker">
      </super>
   </extension>
    
   <extension
        point="org.eclipse.ui.editors.annotationTypes">
        <type
            name="org.sonar.ide.eclipse.duplicationAnnotationType"
            markerType="org.sonar.ide.eclipse.sonarDuplicationMarker"/>
    </extension>

    <extension
        point="org.eclipse.ui.editors.markerAnnotationSpecification">
        <specification
            annotationType="org.sonar.ide.eclipse.duplicationAnnotationType"
            annotationImageProvider="org.sonar.ide.eclipse.markers.SonarMarkerImageProvider"
            presentationLayer="5"
            label="sonar duplication"
            verticalRulerPreferenceKey="org.sonar.ide.eclipse.duplication.verticalruler"
            verticalRulerPreferenceValue="true"
            overviewRulerPreferenceKey="org.sonar.ide.eclipse.duplication.overviewruler"
            overviewRulerPreferenceValue="true"
            showInNextPrevDropdownToolbarActionKey="org.sonar.ide.eclipse.duplication.dropdown"
            showInNextPrevDropdownToolbarAction="true"
            isGoToPreviousNavigationTargetKey="org.sonar.ide.eclipse.duplication.previous"
            isGoToPreviousNavigationTarget="true"
            isGoToNextNavigationTargetKey="org.sonar.ide.eclipse.duplication.next"
            isGoToNextNavigationTarget="true"
            highlightPreferenceKey="org.sonar.ide.eclipse.duplication.highlight"
            highlightPreferenceValue="true"
            textPreferenceKey="org.sonar.ide.eclipse.duplication.error.text"
            textPreferenceValue="true"
            textStylePreferenceKey="org.sonar.ide.eclipse.duplication.text.style"
            textStylePreferenceValue="BOX"
            colorPreferenceKey="org.sonar.ide.eclipse.duplication.color"
            colorPreferenceValue="255,246,191"/>
    </extension>
    



   <extension point="org.eclipse.ui.console.consoleFactories">
      <consoleFactory label="%sonar.consolefactory.label" icon="icons/sonar.png"
            class="org.sonar.ide.eclipse.console.SonarConsoleFactory"/>
   </extension>

   <extension point="org.eclipse.ui.console.consolePageParticipants">
      <consolePageParticipant
            class="org.sonar.ide.eclipse.console.SonarConsolePageParticipant"
            id="org.sonar.ide.eclipse.launch.console.SonarConsolePageParticipant">
         <enablement>
            <instanceof value="org.sonar.ide.eclipse.console.SonarConsole"/>
         </enablement>
      </consolePageParticipant>
   </extension>
   <extension
         point="org.eclipse.ui.actionSets">
     <actionSet
           id="org.sonar.ide.eclipse.actionSet"
           label="%actionSet.label"
           visible="true">
        <menu
              id="sonarMenu"
              label="%sonar.menu.label"
              path="project/additions">
        </menu>
        <action
              class="org.sonar.ide.eclipse.actions.AutoConfigureProjectAction"
              icon="icons/sonar.png"
              id="org.sonar.ide.eclipse.actions.AutoConfigureProjectAction"
              label="%sonar.action.allautoconiguration.label"
              menubarPath="project/additions"
              tooltip="%sonar.action.allautoconiguration.tooltip">
        </action>
        <action
              class="org.sonar.ide.eclipse.actions.RefreshViolationAction"
              icon="icons/sonar.png"
              id="org.sonar.ide.eclipse.actions.RefreshViolationAction"
              label="%sonar.action.allrefreshviolation.label"
              menubarPath="project/additions"
              tooltip="%sonar.action.allrefreshviolation.tooltip">
        </action>
     </actionSet>
     <actionSet
           id="org.sonar.ide.eclipse.ui.menu.help"
           label="Feedback Helpers"
           visible="true">
        <action
              id="org.sonar.ide.eclipse.ui.SendFeedback"
              menubarPath="help/feedback"
              class="org.sonar.ide.eclipse.actions.SendFeedbackAction"
              label="Report Sonar Issue"
              icon="icons/sonar.png">
        </action>
     </actionSet>
   </extension>
   <extension
         point="org.eclipse.ui.perspectives">
      <perspective
            class="org.sonar.ide.eclipse.perspectives.SonarPerspectiveFactory"
            icon="icons/sonar.png"
            id="org.sonar.ide.eclipse.perspectives.SonarPerspective"
            name="%sonar.perspective.name">
      </perspective>
   </extension>

  <!-- Welcome -->
  <extension point="org.eclipse.ui.intro.configExtension">
      <configExtension configId="org.eclipse.ui.intro.universalConfig"
                       content="intro/overview.xml"/>
      <configExtension configId="org.eclipse.ui.intro.universalConfig"
                       content="intro/whatsnew.xml"/>
      <configExtension configId="org.eclipse.ui.intro.universalConfig"
                       content="intro/tutorials.xml"/>
  </extension>

  <!-- Marker resolver -->
  <extension
        point="org.eclipse.ui.ide.markerResolution">
     <markerResolutionGenerator
           class="org.sonar.ide.eclipse.markers.SonarMarkerResolutionGenerator"
           markerType="org.sonar.ide.eclipse.sonarViolationMarker">
     </markerResolutionGenerator>
  </extension>
  <extension
        point="org.sonar.ide.eclipse.resolver">
     <resolver
           class="org.sonar.ide.eclipse.markers.resolvers.NoSonarResolver">
     </resolver>
  </extension>
  <extension
        point="org.sonar.ide.eclipse.resolver">
     <resolver
           class="org.sonar.ide.eclipse.markers.resolvers.IgnoreMarkerResolver">
     </resolver>
  </extension>
  
  <!-- Quick diff -->
  <extension
        point="org.eclipse.ui.workbench.texteditor.quickDiffReferenceProvider">
     <referenceprovider
            name="Sonar source"
            label="Sonar source"
           class="org.sonar.ide.eclipse.compare.SonarReferenceProvider"
           id="org.sonar.ide.eclipse.referenceprovider">
     </referenceprovider>
  </extension>
  
  
  <!-- Coverage Ruler -->
  <extension
        point="org.eclipse.ui.workbench.texteditor.rulerColumns">
     <column
           class="org.sonar.ide.eclipse.internal.ui.texteditor.coverage.CoverageColumn"
            name="Show coverage (sonar)"
           enabled="true"
           global="true"
           id="org.sonar.ide.eclipse.coverageRuler"
           includeInMenu="false">
         <placement gravity="1.0">
            <after id="org.eclipse.ui.editors.columns.linenumbers"/>
         </placement>
         <targetClass
               class="org.eclipse.jdt.internal.ui.javaeditor.CompilationUnitEditor">
         </targetClass>      
     </column>
  </extension>
  
   <extension
         point="org.eclipse.ui.popupMenus">
      <viewerContribution
            targetID="#CompilationUnitRulerContext"
            id="org.eclipse.ui.texteditor.ruler.context.actions">
         <action
               label="Show sonar coverage"
               class="org.sonar.ide.eclipse.internal.ui.texteditor.coverage.CoverageToggleAction"
               menubarPath="additions"
               state="false"
               style="toggle"
               id="org.sonar.ide.eclipse.coverageToggleAction">
         </action>
      </viewerContribution>
   </extension>
</plugin>
