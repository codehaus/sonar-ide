<!DOCTYPE idea-plugin PUBLIC "Plugin/DTD" "http://plugins.intellij.net/plugin.dtd">
<idea-plugin version="2" url="${project.url}">
  <name>Sonar</name>

  <!-- TODO id should be org.sonar.ide.idea -->
  <id>${project.groupId}.${project.artifactId}</id>
  <version>${project.version}, ${plugin.timestamp}</version>

  <description><![CDATA[${project.description}]]></description>

  <idea-version since-build="${idea.build}"/>

  <vendor url="${plugin.vendor.url}" email="${plugin.vendor.email}">${plugin.vendor}</vendor>

  <depends>org.jetbrains.idea.maven</depends>

  <application-components>
    <component>
      <implementation-class>org.sonar.ide.idea.IdeaSonarApplicationComponent</implementation-class>
    </component>
  </application-components>

  <project-components>
    <component>
      <implementation-class>org.sonar.ide.idea.IdeaSonarProjectComponent</implementation-class>
    </component>
  </project-components>

  <module-components>
    <component>
      <implementation-class>org.sonar.ide.idea.IdeaSonarModuleComponent</implementation-class>
    </component>
  </module-components>

  <actions>
    <action id="Sonar.ShowMeasures"
            class="org.sonar.ide.idea.actions.ShowMeasuresAction"
            text="Show measures"/>

    <action id="Sonar.GoToDashboard"
            class="org.sonar.ide.idea.actions.GoToDashboardAction"
            text="Go to dashboard"/>

    <group id="Sonar.BaseProjectMenu">
      <reference ref="Sonar.GoToDashboard"/>
      <reference ref="Sonar.ShowMeasures"/>
    </group>

    <group id="Sonar.GlobalProjectMenu"
           class="org.sonar.ide.idea.utils.actions.SonarActionGroup"
           text="Sonar" popup="true" icon="/org/sonar/ide/images/sonarLogo.png">
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
      <add-to-group group-id="ProjectViewPopupMenu" anchor="last"/>
      <reference ref="Sonar.BaseProjectMenu"/>
    </group>
  </actions>

  <extensions defaultExtensionNs="com.intellij">
    <errorHandler implementation="org.sonar.ide.idea.BlameSonar"/>
    <selectInTarget implementation="org.sonar.ide.idea.SelectInSonarTarget"/>
  </extensions>
</idea-plugin>
